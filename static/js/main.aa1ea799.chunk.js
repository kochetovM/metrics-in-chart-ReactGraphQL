(this["webpackJsonpeog-react-visualization-base"]=this["webpackJsonpeog-react-visualization-base"]||[]).push([[0],{118:function(e,t,r){e.exports=r(231)},231:function(e,t,r){"use strict";r.r(t);var a=r(0),c=r.n(a),n=r(12),i=r.n(n),l=r(18),s=r(61),o=r(112),m=r(30),u=r.n(m),d=r(51),p=r(63),b=r(25),v=Object(b.a)({name:"weather",initialState:{temperatureinCelsius:0,temperatureinFahrenheit:0,description:"",locationName:""},reducers:{weatherDataRecevied:(e,t)=>{var r=t.payload,a=r.description,c=r.locationName,n=r.temperatureinCelsius;e.temperatureinCelsius=n,e.temperatureinFahrenheit=9*n/5+32,e.description=a,e.locationName=c},weatherApiErrorReceived:(e,t)=>e}}),h=v.reducer,f=v.actions,y=u.a.mark(E),M=u.a.mark(g);function E(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(d.a)(p.b.error,"Error Received: ".concat(e.payload.error));case 2:case"end":return t.stop()}}),y)}function g(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.c)(f.weatherApiErrorReceived.type,E);case 2:case"end":return e.stop()}}),M)}var j=u.a.mark(O);function O(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.b)(g);case 2:case"end":return e.stop()}}),j)}var w=Object(b.a)({name:"metrics",initialState:{metrics:[],selectedMetrics:[],currentSelectedMetric:"",deletedMetric:""},reducers:{metricsDataReceived:(e,t)=>{e.metrics=t.payload},metricsApiErrorReceived:(e,t)=>e,metricsSelected:(e,t)=>{var r=t.payload.filter(t=>!e.selectedMetrics.includes(t))[0];e.currentSelectedMetric=r,e.selectedMetrics=t.payload,e.deletedMetric=""},metricDeleted:(e,t)=>{e.selectedMetrics=e.selectedMetrics.filter(e=>e!==t.payload),e.deletedMetric=t.payload,e.currentSelectedMetric=""}}}),x=w.reducer,N=w.actions,C=Object(b.a)({name:"historyMetrics",initialState:{},reducers:{historyMetricReceived:(e,t)=>{e[t.payload.key]=t.payload.measurements},historyMetricApiError:(e,t)=>e,historyMetricNotActive:(e,t)=>{delete e[t.payload]}}}),k=C.reducer,S=C.actions,A=Object(b.a)({name:"currentMeasurement",initialState:{},reducers:{newMeasurementReceived:(e,t)=>{e[t.payload.metric]=t.payload.value},currentMeasurementApiError:(e,t)=>e,metricDeleted:(e,t)=>{delete e[Object.keys(e).filter(e=>!t.payload.includes(e))]}}}),D=A.reducer,R=A.actions,q={weather:h,availableCharts:x,currentMetrics:D,historyMetrics:k},T=Object(l.combineReducers)(q),B=r(111),I=r(270),W=r(281),$=r(277),z=r(278),F=(r(127),r(273)),H=r(271),J=r(272),G=r(27),L=r(17),P=r(20),V=(r(284),r(269)),K=r(282),Q=r(9),U=(Object(Q.a)(e=>({root:{background:e.palette.secondary.main},label:{color:e.palette.primary.main}}))(K.a),()=>c.a.createElement("div",null)),X=Object(I.a)({grow:{flexGrow:1}}),Y=()=>{var e=X();return c.a.createElement(H.a,{position:"static"},c.a.createElement(J.a,null,c.a.createElement(F.a,{variant:"h6",color:"inherit",className:e.grow},"Metrics"," Charts"),c.a.createElement(U,null)))},Z=Object(I.a)({wrapper:{height:"100vh"}}),_=({children:e})=>{var t=Z();return a.createElement("div",{className:t.wrapper},e)},ee=r(274),te=r(279),re=r(283),ae=Object(I.a)(e=>Object(W.a)({formControlContainer:{width:"45%",justifySelf:"flex-end"},formControl:{background:"#fff"},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2,zIndex:5}})),ce=({options:e,selectedOptions:t,handleChange:r,handleDelete:a})=>{var n=ae(),i=e.filter(e=>!t.includes(e));return c.a.createElement(ee.a,{variant:"outlined",className:n.formControlContainer},c.a.createElement(te.a,{className:n.formControl,id:"demo-simple-select-outlined",multiple:!0,onChange:r,value:t,renderValue:e=>c.a.createElement("div",{className:n.chips},e.map(e=>c.a.createElement(K.a,{key:e,label:e,className:n.chip,onDelete:a(e),onMouseDown:e=>{e.stopPropagation()}})))},0===i.length?c.a.createElement(F.a,{variant:"body2",align:"center",gutterBottom:!0},"No options."):i.map(e=>c.a.createElement(re.a,{key:e,value:e},e))))},ne=e=>{var t=e.availableCharts,r=t.metrics,a=t.currentSelectedMetric;return{metrics:r,selectedMetrics:t.selectedMetrics,currentSelectedMetric:a,deletedMetric:t.deletedMetric}},ie=()=>{var e=Object(L.b)(),t=Object(L.c)(ne),r=t.selectedMetrics,n=t.metrics,i=Object(P.b)({query:"\nquery {\n    getMetrics \n}\n"}),l=Object(G.a)(i,1)[0],s=l.fetching,o=l.data,m=l.error;return Object(a.useEffect)(()=>{if(m)e(N.metricsApiErrorReceived({error:m.message}));else if(o){var t=o.getMetrics;e(N.metricsDataReceived(t))}},[e,o,m]),s?c.a.createElement(V.a,null):c.a.createElement(ce,{options:n,selectedOptions:r,handleChange:t=>{e(N.metricsSelected(t.target.value))},handleDelete:t=>r=>{e(N.metricDeleted(t))}})},le=()=>c.a.createElement(ie,null),se=r(38),oe=r(109),me=r(110),ue=["rgba(41, 6, 107, 1)","rgba(175, 75, 206, 1)","rgba(219, 76, 178, 1)","rgba(235, 84, 140, 1)","rgba(234, 115, 105, 1)","rgba(240, 165, 143, 1)"],de=({data:e})=>{if(0===Object.keys(e).length)return null;var t=[],r=Object.entries(e).map(([e,r],a)=>(t.push({id:"y-".concat(e),type:"linear",position:"left"}),{label:e,type:"line",borderWidth:1,fill:!1,data:r.map(({at:e,value:t})=>({t:e,y:t})),yAxisID:"y-".concat(e),lineTension:0,borderColor:ue[a],pointHoverRadius:8,pointHoverBorderWidth:10,pointRadius:0}));return c.a.createElement(me.Line,{data:{datasets:r},options:{scales:{xAxes:[{type:"time",distribution:"linear"}],yAxes:t}}})},pe=Date.now()-18e5,be=e=>({historyMetrics:e.historyMetrics}),ve=()=>{var e=Object(L.b)(),t=Object(L.c)(ne),r=t.currentSelectedMetric,n=t.deletedMetric,i=Object(L.c)(be).historyMetrics,l=Object(P.b)({query:"\n    query($metricName: String!, $afterTime: Timestamp) {\n        getMultipleMeasurements(input: {\n            metricName: $metricName,\n            after: $afterTime \n          }) {\n            metric,\n            measurements {\n                metric,\n                at, value, unit\n              }\n        }\n    }\n",variables:{metricName:r,afterTime:pe}}),s=Object(G.a)(l,1)[0],o=s.data,m=s.error;return Object(a.useEffect)(()=>{if(m)e(S.historyMetricApiError({error:m.message}));else if(o)if(""===n||""!==r){if(!r||""!==r){var t=o.getMultipleMeasurements[0].measurements;if(0!==t.length){var a={key:r,measurements:t};e(S.historyMetricReceived(a))}}}else e(S.historyMetricNotActive(n))},[e,o,r,n,m]),c.a.createElement(de,{data:i})},he=r(275),fe=r(276),ye=Object(I.a)(Object(W.a)({card:{maxWidth:"130px",padding:"7px 7px"},container:{width:"50%"}})),Me=({metric:e,value:t})=>{var r=ye();return c.a.createElement(he.a,{className:r.card},c.a.createElement(F.a,{variant:"body2",gutterBottom:!0},e),c.a.createElement(F.a,{variant:"h6"},t))},Ee=({currentMetrics:e})=>{var t=ye();return c.a.createElement(fe.a,{container:!0,spacing:2,className:t.container,direction:"row",justify:"flex-start",alignItems:"flex-start"},Object.entries(e).map(([e,t],r)=>c.a.createElement(fe.a,{item:!0,xs:3,key:e+r},c.a.createElement(Me,{metric:e,value:t}))))},ge=(e=[],t)=>t.newMeasurement,je=e=>({currentMetrics:e.currentMetrics}),Oe=()=>{var e=Object(L.b)(),t=Object(P.c)({query:"\n  subscription NewMeasurement {\n    newMeasurement {\n        metric\n        at\n        value\n        unit\n    }\n  }\n"},ge),r=Object(G.a)(t,1)[0],n=Object(L.c)(ne).selectedMetrics,i=Object(L.c)(je).currentMetrics,l=r.data,s=r.error;return Object(a.useEffect)(()=>{if(s)e(R.currentMeasurementApiError({error:s.message}));else if(l){var t=l,r=t.metric;n.includes(r)&&e(R.newMeasurementReceived(t))}},[e,l,s,n]),Object(a.useEffect)(()=>{e(R.metricDeleted(n))},[n,e]),c.a.createElement(Ee,{currentMetrics:i})},we=(()=>{var e=Object(s.composeWithDevTools)({}),t=Object(o.a)(),r=Object(l.applyMiddleware)(t),a=Object(l.createStore)(T,e(r));return t.run(O),a})(),xe=Object(B.a)({palette:{primary:{main:"rgb(39,49,66)"},secondary:{main:"rgb(197,208,222)"},background:{default:"rgb(226,231,238)"}}}),Ne=new oe.SubscriptionClient("wss://react.eogresources.com/graphql",{reconnect:!0}),Ce=Object(se.a)({url:"https://react.eogresources.com/graphql",exchanges:[...se.c,Object(se.d)({forwardSubscription:e=>Ne.request(e)})]}),ke=Object(I.a)(()=>Object(W.a)({workingArea:{width:"100%",display:"flex",flexDirection:"column",padding:"20px"},metrics:{width:"100%",display:"flex",justifyContent:"flex-start",marginBottom:"30px"}})),Se=()=>{var e=ke();return c.a.createElement($.a,{theme:xe},c.a.createElement(z.a,null),c.a.createElement(L.a,{store:we},c.a.createElement(_,null,c.a.createElement(P.a,{value:Ce},c.a.createElement(Y,null),c.a.createElement("div",{className:e.workingArea},c.a.createElement("div",{className:e.metrics},c.a.createElement(Oe,null),c.a.createElement(le,null)),c.a.createElement(fe.a,{container:!0,spacing:2,direction:"row"},c.a.createElement(fe.a,{item:!0,xs:11,justify:"center",alignItems:"center"},c.a.createElement(ve,null),c.a.createElement(p.a,null)),c.a.createElement(fe.a,{item:!0,xs:1})))))))};i.a.render(c.a.createElement(Se,null),document.getElementById("root"))}},[[118,1,2]]]);
//# sourceMappingURL=main.aa1ea799.chunk.js.map